import type { BuilderCatalog } from "@/types/builder";
import type { MenuCatalogCategory, MenuDisplayCategory, MenuProduct } from "@/types/menu";

const DEFAULT_DELIVERY_NOTE = "Orders lock Tuesday · deliveries land by Friday braai-time";

type CatalogProduct = BuilderCatalog[keyof BuilderCatalog][number];

export const mockCatalog: BuilderCatalog = {
  bunnyFillings: [
    {
      id: "bunny-lamb",
      name: "Lamb and Potato Bunny Chow filling",
      description: "580-600g Portion · Loaf-ready. Our Authentic and delicious Durban Curry Lamb and potato Bunny Chow filling.",
      price: 1295,
      spiceLevel: "Mild",
      heatNotes: "Starts mellow — amp up with the boosters if you want that Grey Street burn.",
      image: "/curries/lamb-durban-placeholder.png",
      bunnyImage: "/curries/bunny/lamb-bunny-placeholder.png",
      badge: "OG Durban",
      serves: "Feeds 2",
      dietaryTags: ["Dairy-free"],
      highlights: ["Loaf-ready portion", "3-day marinade"],
      availability: "in-stock",
      deliveryNote: DEFAULT_DELIVERY_NOTE,
      allergens: ["Mustard", "Fenugreek"],
    },
    {
      id: "bunny-beef",
      name: "Beef Short Rib and Potato Bunny Chow filling",
      description: "580-600g Portion · Loaf-ready. Our Authentic and delicious Durban Curry Beef Shorty Rib and potato Bunny Chow filling.",
      price: 1295,
      spiceLevel: "Mild",
      heatNotes: "Rich marrow depth ready for a Very Hot boost if you twist the dial.",
      image: "/curries/beef-durban-placeholder.png",
      bunnyImage: "/curries/bunny/beef-bunny-placeholder.png",
      badge: "Street classic",
      serves: "Feeds 2",
      dietaryTags: ["High protein", "Dairy-free"],
      highlights: ["Bone-in richness", "Grey Street masala"],
      availability: "limited",
      deliveryNote: DEFAULT_DELIVERY_NOTE,
      allergens: ["Mustard"],
    },
    {
      id: "bunny-bean",
      name: "Bean and Potato Bunny Chow filling",
      description: "580-600g Portion · Loaf-ready. Our Authentic and delicious Durban Curry Bean and potato Bunny Chow filling. Suitable for Vegans.",
      price: 1125,
      spiceLevel: "Mild",
      heatNotes: "Naturally vegan. Wakes up with the Hot sachet and a spoon of chutney.",
      image: "/curries/bean-durban-placeholder.png",
      bunnyImage: "/curries/bunny/bean-bunny-placeholder.png",
      badge: "Veg hero",
      serves: "Feeds 2",
      dietaryTags: ["Vegan", "Dairy-free"],
      highlights: ["Slow-simmered beans", "Naturally gluten-free"],
      availability: "in-stock",
      deliveryNote: DEFAULT_DELIVERY_NOTE,
      allergens: [],
    },
    {
      id: "bunny-chicken",
      name: "Chicken and Potato Bunny Chow filling",
      description: "580-600g Portion · Loaf-ready. Our Authentic and delicious Durban Curry Chicken and potato Bunny Chow filling.",
      price: 1195,
      spiceLevel: "Mild",
      heatNotes: "Classic comfort — go Very Hot with fenugreek & mustard seed pops.",
      image: "/curries/chicken-durban-placeholder.png",
      bunnyImage: "/curries/bunny/chicken-bunny-placeholder.png",
      badge: "Crowd pleaser",
      serves: "Feeds 2",
      dietaryTags: ["Halal", "High protein"],
      highlights: ["Skinless thigh meat", "48-hour marinade"],
      availability: "in-stock",
      deliveryNote: DEFAULT_DELIVERY_NOTE,
      allergens: ["Mustard"],
    },
  ],
  familyCurries: [
    {
      id: "family-lamb",
      name: "Lamb Durban Curry (Meal for 2 - 3)",
      description: "800g Portion · Bowl-ready. Slow cooked lamb breast in our delicious Durban curry sauce.",
      price: 2125,
      spiceLevel: "Mild",
      heatNotes: "Deep, warming heat. Serve with rice, pap, or roti and let the fam dig in.",
      image: "/curries/lamb-durban-placeholder.png",
      badge: "Family feast",
      serves: "Feeds 3",
      dietaryTags: ["High protein", "Dairy-free"],
      highlights: ["Grass-fed lamb", "Simmered 6 hours"],
      availability: "limited",
      deliveryNote: DEFAULT_DELIVERY_NOTE,
      allergens: ["Mustard"],
    },
    {
      id: "family-beef",
      name: "Beef Short Rib Durban Curry (Meal for 2 - 3 persons)",
      description: "800g Portion · Bowl-ready. Slow cooked Beef Short Rib in our delicious Durban curry sauce.",
      price: 2125,
      spiceLevel: "Mild",
      heatNotes: "Bold marrow richness. Boost the heat if you dare, or keep it cozy for everyone.",
      image: "/curries/beef-durban-placeholder.png",
      badge: "Braai night hero",
      serves: "Feeds 3",
      dietaryTags: ["High protein", "Dairy-free"],
      highlights: ["On-the-bone flavour", "Cooked low & slow"],
      availability: "in-stock",
      deliveryNote: DEFAULT_DELIVERY_NOTE,
      allergens: ["Mustard"],
    },
    {
      id: "family-bean",
      name: "Bean Durban Curry (Meal for 2 - 3)",
      description: "800g Portion · Bowl-ready. Red speckled beans in our delicious Durban curry sauce.",
      price: 1895,
      spiceLevel: "Mild",
      heatNotes: "Earthy, tangy depth. Perfect with roti or rice — crank it Hot for extra kick.",
      image: "/curries/bean-durban-placeholder.png",
      badge: "Plant power",
      serves: "Feeds 3",
      dietaryTags: ["Vegan", "Gluten-free"],
      highlights: ["Protein-rich beans", "Tangy tamarind finish"],
      availability: "in-stock",
      deliveryNote: DEFAULT_DELIVERY_NOTE,
      allergens: [],
    },
    {
      id: "family-chicken",
      name: "Chicken Durban Curry (Meal for 2 - 3 persons)",
      description: "800g portion · Bowl-ready. Deboned and skinless chicken thighs in our delicious Durban curry sauce.",
      price: 1995,
      spiceLevel: "Mild",
      heatNotes: "Comforting classic with fenugreek notes. Boost to Very Hot if the crew can handle it.",
      image: "/curries/chicken-durban-placeholder.png",
      badge: "Sunday staple",
      serves: "Feeds 3",
      dietaryTags: ["Halal", "Dairy-free"],
      highlights: ["Boneless thigh pieces", "Family-friendly mild"],
      availability: "in-stock",
      deliveryNote: DEFAULT_DELIVERY_NOTE,
      allergens: ["Mustard"],
    },
  ],
  sides: [
    {
      id: "bread-loaf",
      name: "Soft White Bunny Loaf",
      description: "Fresh Durban-style unsliced loaf ready to fill.",
      price: 495,
      image: "/menu-placeholders/bread-loaf.png",
      badge: "Essential",
      serves: "Feeds 2",
      dietaryTags: ["Vegetarian"],
      highlights: ["Baked same-day", "Unsliced for max soak"],
      availability: "in-stock",
      deliveryNote: DEFAULT_DELIVERY_NOTE,
      allergens: ["Gluten"],
    },
    {
      id: "bread-vetkoek",
      name: "Vetkoek Pack (4)",
      description: "Golden pillows for mini bunny sliders or dipping.",
      price: 795,
      image: "/menu-placeholders/bread-vetkoek.png",
      serves: "Feeds 2",
      dietaryTags: ["Vegetarian"],
      highlights: ["Hand-shaped daily", "Crispy outside, soft inside"],
      availability: "limited",
      deliveryNote: DEFAULT_DELIVERY_NOTE,
      allergens: ["Gluten"],
    },
    {
      id: "garnish-carrot",
      name: "Pickled Carrot Salad",
      description: "House vinaigrette with shredded carrot & onion.",
      price: 200,
      image: "/menu-placeholders/garnish-carrot.png",
      serves: "Sides for 4",
      dietaryTags: ["Vegan", "Gluten-free"],
      highlights: ["Tangy crunch", "Fridge keeps 5 days"],
      availability: "in-stock",
      deliveryNote: DEFAULT_DELIVERY_NOTE,
      allergens: ["Mustard"],
    },
    {
      id: "bread-glutenfree",
      name: "Gluten-Free Loaf",
      description: "Special order loaf, baked weekly for coeliac-friendly nights.",
      price: 650,
      image: "/menu-placeholders/bread-glutenfree.png",
      maxQuantity: 1,
      serves: "Feeds 2",
      dietaryTags: ["Gluten-free", "Vegetarian"],
      highlights: ["Stoneground flour blend", "Limited bake slots"],
      availability: "preorder",
      deliveryNote: "Pre-order by Monday for Friday delivery",
      allergens: ["Eggs"],
    },
  ],
  sauces: [
    {
      id: "extra-fritters-ready",
      name: "Pumpkin Fritters · Ready",
      description: "Cinnamon sugar dusted, warm-and-serve dessert.",
      price: 595,
      image: "/menu-placeholders/extra-fritters-ready.png",
      badge: "Sweet hit",
      serves: "Dessert for 2",
      dietaryTags: ["Vegetarian"],
      highlights: ["Sugar dusted", "Ready in 10 min"],
      availability: "in-stock",
      deliveryNote: DEFAULT_DELIVERY_NOTE,
      allergens: ["Gluten", "Eggs"],
    },
    {
      id: "extra-fritters-kit",
      name: "Pumpkin Fritters · Kit",
      description: "Mix, fry, coat. Makes 12 legendary fritters.",
      price: 1195,
      image: "/menu-placeholders/extra-fritters-kit.png",
      serves: "Makes 12",
      dietaryTags: ["Vegetarian"],
      highlights: ["Recipe card included", "Great for brunch"],
      availability: "in-stock",
      deliveryNote: DEFAULT_DELIVERY_NOTE,
      allergens: ["Gluten"],
    },
    {
      id: "extra-samoosa",
      name: "Samoosas (12)",
      description: "Hand-folded triangles with your choice of filling.",
      price: 1295,
      image: "/menu-placeholders/extra-samoosa.png",
      badge: "Most loved",
      serves: "12 pieces",
      dietaryTags: ["Halal"],
      highlights: ["Hand-folded", "Choice of fillings"],
      availability: "limited",
      deliveryNote: DEFAULT_DELIVERY_NOTE,
      allergens: ["Gluten"],
    },
    {
      id: "extra-pork-rashers",
      name: "Honey & Mustard Pork Rashers",
      description: "400g prime slices. Air fry for 5 minutes.",
      price: 995,
      image: "/menu-placeholders/extra-pork-rashers.png",
      serves: "Feeds 2",
      dietaryTags: ["High protein"],
      highlights: ["Marinated 24h", "Air fryer friendly"],
      availability: "limited",
      deliveryNote: DEFAULT_DELIVERY_NOTE,
      allergens: ["Mustard", "Honey"],
    },
    {
      id: "extra-vetkoek-filling",
      name: "Durban Vetkoek Mince Filling",
      description: "500g spiced mince for stuffing vetkoek.",
      price: 995,
      image: "/menu-placeholders/extra-vetkoek-filling.png",
      serves: "Fills 6 vetkoek",
      dietaryTags: ["High protein"],
      highlights: ["Ready-to-heat", "Kid-approved mild"],
      availability: "in-stock",
      deliveryNote: DEFAULT_DELIVERY_NOTE,
      allergens: ["Mustard"],
    },
    {
      id: "extra-chutney",
      name: "Mrs Balls Chutney (470ml)",
      description: "The classic dip for every bunny night.",
      price: 495,
      image: "/menu-placeholders/extra-chutney.png",
      serves: "470ml jar",
      dietaryTags: ["Vegan"],
      highlights: ["Iconic flavour", "Shelf stable"],
      availability: "in-stock",
      deliveryNote: DEFAULT_DELIVERY_NOTE,
      allergens: [],
    },
    {
      id: "extra-boerewors",
      name: "Boerewors (500g)",
      description: "Prime beef coil ready for the grill.",
      price: 1095,
      image: "/menu-placeholders/extra-boerewors.png",
      serves: "Feeds 3",
      dietaryTags: ["High protein"],
      highlights: ["Prime beef", "Spice locker blend"],
      availability: "limited",
      deliveryNote: DEFAULT_DELIVERY_NOTE,
      allergens: ["Sulphites"],
    },
    {
      id: "extra-corn-ribs",
      name: "Durban Curried Corn Ribs",
      description: "Spiced charred corn pieces — heat & serve.",
      price: 695,
      image: "/menu-placeholders/extra-corn-ribs.png",
      serves: "Sides for 3",
      dietaryTags: ["Vegan", "Gluten-free"],
      highlights: ["Smoky char", "Air fryer ready"],
      availability: "in-stock",
      deliveryNote: DEFAULT_DELIVERY_NOTE,
      allergens: [],
    },
    {
      id: "extra-biltong",
      name: "Original Beef Biltong",
      description: "100g prime beef — chewy, savoury, addictive.",
      price: 795,
      image: "/menu-placeholders/extra-biltong.png",
      serves: "Snack for 2",
      dietaryTags: ["High protein", "Gluten-free"],
      highlights: ["Air dried 7 days", "Zero sugar"],
      availability: "in-stock",
      deliveryNote: DEFAULT_DELIVERY_NOTE,
      allergens: [],
    },
  ],
  drinks: [
    {
      id: "drink-lassi",
      name: "Salted Lassi",
      description: "Yoghurt sip with toasted cumin salt.",
      price: 425,
      image: "/menu-placeholders/drink-lassi.png",
      serves: "330ml bottle",
      dietaryTags: ["Vegetarian"],
      highlights: ["Cooling sip", "Hand toasted spices"],
      availability: "in-stock",
      deliveryNote: DEFAULT_DELIVERY_NOTE,
      allergens: ["Dairy"],
    },
    {
      id: "drink-chai",
      name: "Cardamom Chai",
      description: "Slow-brewed tea concentrate, spiced and sweet.",
      price: 475,
      image: "/menu-placeholders/drink-chai.png",
      serves: "2 servings",
      dietaryTags: ["Vegan"],
      highlights: ["Brewed 12 hours", "Serve hot or iced"],
      availability: "in-stock",
      deliveryNote: DEFAULT_DELIVERY_NOTE,
      allergens: [],
    },
    {
      id: "drink-soda",
      name: "Tamarind Soda",
      description: "Tamarind, lime, fizzy uplift.",
      price: 395,
      image: "/menu-placeholders/drink-soda.png",
      serves: "330ml can",
      dietaryTags: ["Vegan", "Gluten-free"],
      highlights: ["House syrup", "Pair with spicy curries"],
      availability: "in-stock",
      deliveryNote: DEFAULT_DELIVERY_NOTE,
      allergens: [],
    },
  ],
};

const catalogDisplayCategoryMap: Record<MenuCatalogCategory, MenuDisplayCategory> = {
  bunnyFillings: "Bunny fillings",
  familyCurries: "Family curries",
  sides: "Sides & garnish",
  sauces: "Extras & treats",
  drinks: "Drinks",
};

const getDisplayCategory = (category: MenuCatalogCategory, productId: string): MenuDisplayCategory => {
  if (category === "sides" && productId.startsWith("bread-")) {
    return "Breads & bases";
  }
  return catalogDisplayCategoryMap[category];
};

const mapToMenuProducts = (
  items: CatalogProduct[],
  category: MenuCatalogCategory
): MenuProduct[] => {
  return items.map((item) => ({
    id: item.id,
    name: item.name,
    description: item.description,
    price: item.price,
    image: item.image,
    badge: item.badge,
    spiceLevel: "spiceLevel" in item ? item.spiceLevel : undefined,
    heatNotes: "heatNotes" in item ? item.heatNotes : undefined,
    serves: item.serves,
    dietaryTags: item.dietaryTags,
    highlights: item.highlights,
    availability: item.availability,
    deliveryNote: item.deliveryNote,
    allergens: item.allergens,
    maxQuantity: "maxQuantity" in item ? item.maxQuantity : undefined,
    catalogCategory: category,
    displayCategory: getDisplayCategory(category, item.id),
  }));
};

export const menuProducts: MenuProduct[] = [
  ...mapToMenuProducts(mockCatalog.bunnyFillings, "bunnyFillings"),
  ...mapToMenuProducts(mockCatalog.familyCurries, "familyCurries"),
  ...mapToMenuProducts(mockCatalog.sides, "sides"),
  ...mapToMenuProducts(mockCatalog.sauces, "sauces"),
  ...mapToMenuProducts(mockCatalog.drinks, "drinks"),
];

export const MENU_DISPLAY_CATEGORIES: MenuDisplayCategory[] = [
  "Bunny fillings",
  "Family curries",
  "Breads & bases",
  "Sides & garnish",
  "Extras & treats",
  "Drinks",
];



